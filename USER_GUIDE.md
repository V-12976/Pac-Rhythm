# Pac-Rhythm 使用说明

## 快速开始
- 首页进入“开始游戏”选择曲目后即可演奏
- 编辑器中导入音频后自动计算 BPM，并可直接保存曲目

## 手势启动
- 游戏页体感面板提供“手势启动”开关
- 双手举起并保持 2 秒后会自动开始游戏
- 右侧状态条显示手势识别状态与计时
- 预览画面中可拖动两条水平线以划分上/中/下区域

## 曲目存储与迁移
- 默认使用 IndexedDB 保存曲目与音频信息
- file:// 协议下使用 OPFS 同步 songs.json，确保本地文件访问也能保存
- 旧的 localStorage 数据会自动迁移到当前存储

## BPM 自动计算
- 导入音频后自动分析音频能量峰值
- 计算进度在 BPM 状态提示中显示

## 测试模式
- 访问 `http://localhost:8000/?test=1` 可运行内置单元测试

## 曲谱包分享（Song Pack）
- 曲谱包保存在 `songs/<包名>/` 文件夹中，包含 `chart.json`（谱面）和音频文件
- 在 `songs/index.json` 中注册曲谱包，格式：`{ "folder": "包名", "audio": "audio.mp3" }`
- 启动游戏后，文件夹曲谱包会自动加载并在曲目列表中显示（标有 📁 图标）
- 在"开始游戏"页面，IndexedDB 曲目可点击"导出"按钮下载为 zip 文件
- 将 zip 解压到 `songs/` 目录并在 `index.json` 中注册即可分享
- **注意**：曲谱包加载需通过 HTTP 服务器运行（如 `python -m http.server 8000`）
